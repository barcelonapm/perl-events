#!/usr/bin/perl
use strict;
use warnings;
use YAML qw( LoadFile DumpFile );
use Text::Unidecode;

my $confs = LoadFile('conferences.yml');
my %confs;

for my $conf ( @$confs ) {

    # get the directory name
    my $dirname = $conf->{name};
    $dirname = unidecode($dirname);
    $dirname =~ y! /!_!;
    mkdir $dirname if !-e $dirname;

    # save the data
    push @{ $confs{$dirname} }, $conf;
    print "$conf->{conf_id}\n";
}

for my $conf ( keys %confs ) {
    DumpFile( "$conf/conferences.yml" => $confs{$conf} );
}
